<odoo>

  <!-- ===================== ACTION: OPEN FILTERED OFFERS ===================== -->
  <record id="action_estate_property_offer" model="ir.actions.act_window">
    <field name="name">Offers</field>
    <field name="res_model">estate.property.offer</field>
    <field name="view_mode">list,form</field>
    <field name="domain">[('type_id','=',active_id)]</field>
    <field name="target">current</field>
  </record>

  <!-- ===================== LIST VIEW ===================== -->
  <record id="view_estate_property_type_list" model="ir.ui.view">
    <field name="name">estate.property.type.list</field>
    <field name="model">estate.property.type</field>
    <field name="arch" type="xml">
      <list string="Property Types" default_order="sequence,name">
        <field name="sequence" widget="handle"/>
        <field name="name"/>
        <field name="property_count" optional="show"/>
        <field name="offer_count" optional="show"/>
      </list>
    </field>
  </record>

  <!-- ===================== FORM VIEW ===================== -->
  <record id="view_estate_property_type_form" model="ir.ui.view">
    <field name="name">estate.property.type.form</field>
    <field name="model">estate.property.type</field>
    <field name="arch" type="xml">
      <form string="Property Type">
        <sheet>
          <div class="oe_button_box" name="button_box">
            <button class="oe_stat_button" type="action" name="%(action_estate_property_offer)d" icon="fa-list" title="Offers">
              <field name="offer_count" widget="statinfo"/>
            </button>
            <button class="oe_stat_button" type="object" name="action_open_property_ids" icon="fa-home" title="Properties">
              <field name="property_count" widget="statinfo"/>
            </button>
          </div>

          <div class="oe_title">
            <h1><field name="name" nolabel="1" placeholder="e.g. House"/></h1>
          </div>

          <group invisible="1"><field name="sequence"/></group>

          <notebook>
            <page string="Properties">
              <field name="property_ids" readonly="1">
                <list string="Properties">
                  <field name="name" string="Title"/>
                  <field name="expected_price"/>
                  <field name="state"/>
                </list>
                <form string="Property">
                  <group>
                    <field name="name"/>
                    <field name="expected_price"/>
                    <field name="state"/>
                  </group>
                </form>
              </field>
            </page>

            <page string="Offers">
              <field name="offer_ids" readonly="1">
                <list string="Offers">
                  <field name="price"/>
                  <field name="partner_id"/>
                  <field name="status"/>
                </list>
                <form string="Offer">
                  <group>
                    <field name="price"/>
                    <field name="partner_id"/>
                    <field name="status"/>
                  </group>
                </form>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- ===================== MAIN ACTION ===================== -->
  <record id="action_estate_property_type" model="ir.actions.act_window">
    <field name="name">Property Types</field>
    <field name="res_model">estate.property.type</field>
    <field name="view_mode">list,form</field>
  </record>

</odoo>
